schedules:
  - cron: "0 */1 * * *"
    displayName: Every 1 hours
    branches:
      include:
      - AppInsightsPerf
    always: true

stages:
- stage: WinPerfTest
  displayName: Performance tests
  dependsOn: []
  jobs:
  - template: templates/run-perftest.yml
    parameters:
      imageName: 'vs2017-win2016'
      jobName: 'winPerf'
      displayName: 'Windows Server 2016'

- stage: LinuxPerfTest
  displayName: Performance tests
  dependsOn: []
  jobs:
  - template: templates/run-perftest.yml
    parameters:
      imageName: 'ubuntu-16.04'
      jobName: 'linuxPerf'
      displayName: 'Ubuntu 16.04'

- stage: MacOSPerfTest
  displayName: Performance tests
  dependsOn: []
  jobs:
  - template: templates/run-perftest.yml
    parameters:
      imageName: 'macOS-10.14'
      jobName: 'macOSPerf'
      displayName: 'macOS 10.14'
