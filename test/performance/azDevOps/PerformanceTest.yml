schedules:
  - cron: "0 15 * * 1-5"
    displayName: Every weekday at 15:00
    branches:
      include:
      - AppInsightsPerf
    always: true

stages:
- stage: WinPerfTest
  displayName: Performance tests
  dependsOn: []
  jobs:
  - template: templates/run-perftest.yml
    parameters:
      agentOS: 'Windows_NT'
      jobName: 'winPerf'
      displayName: 'Windows Server 2016'

- stage: LinuxPerfTest
  displayName: Performance tests
  dependsOn: []
  jobs:
  - template: templates/run-perftest.yml
    parameters:
      agentOS: 'Linux'
      jobName: 'linuxPerf'
      displayName: 'Ubuntu 16.04'

- stage: MacOSPerfTest
  displayName: Performance tests
  dependsOn: []
  jobs:
  - template: templates/run-perftest.yml
    parameters:
      agentOS: 'Darwin'
      jobName: 'macOSPerf'
      displayName: 'macOS 10.14'
